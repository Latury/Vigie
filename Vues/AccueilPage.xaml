<!--
    ╔══════════════════════════════════════════════════════════════════════╗
    ║                          VIGIE                                       ║
    ║        Centre de maintenance logicielle intelligent                  ║
    ║                                                                      ║
    ║  Module : Vues                                                       ║
    ║  Fichier : AccueilPage.xaml                                          ║
    ║                                                                      ║
    ║  Rôle :                                                              ║
    ║  Représente la page d’accueil de l’application.                      ║
    ║                                                                      ║
    ║  Responsabilités :                                                   ║
    ║  - Afficher l’état du système                                        ║
    ║  - Afficher la liste des logiciels détectés                          ║
    ║  - Permettre le déclenchement du scan                                ║
    ║                                                                      ║
    ║  Licence : MIT                                                       ║
    ║  Copyright © 2026 Flo Latury                                         ║
    ╚══════════════════════════════════════════════════════════════════════╝
-->

<Page
    x:Class="Vigie.Vues.AccueilPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <!--  Layout principal  -->
    <Grid Background="#F4FAFF">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!--  Bloc titre  -->
            <RowDefinition Height="Auto" />
            <!--  Carte  -->
            <RowDefinition Height="*" />
            <!--  Liste  -->
            <RowDefinition Height="Auto" />
            <!--  Bouton  -->
        </Grid.RowDefinitions>

        <!--  Bloc titre  -->
        <StackPanel
            Grid.Row="0"
            Margin="40,30,0,0"
            Spacing="4">

            <TextBlock
                FontSize="24"
                FontWeight="SemiBold"
                Foreground="#1F2933"
                Text="État du système" />

            <TextBlock
                FontSize="14"
                Foreground="#6B7280"
                Text="{Binding DernierScanTexte}" />

        </StackPanel>

        <!--  Carte état système  -->
        <Border
            Grid.Row="1"
            Width="480"
            Height="200"
            Margin="0,20,0,20"
            HorizontalAlignment="Center"
            Background="#FFFFFF"
            CornerRadius="12">

            <Border.Shadow>
                <ThemeShadow />
            </Border.Shadow>

            <StackPanel
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Spacing="16">

                <Grid>
                    <Ellipse
                        Width="110"
                        Height="110"
                        Fill="#2E7D32"
                        Opacity="0.08" />

                    <Ellipse
                        Width="80"
                        Height="80"
                        Fill="Transparent"
                        Stroke="#2E7D32"
                        StrokeThickness="4" />
                </Grid>

                <TextBlock
                    HorizontalAlignment="Center"
                    FontSize="20"
                    FontWeight="SemiBold"
                    Foreground="#1F2933"
                    Text="{Binding TexteEtat}" />

            </StackPanel>

        </Border>

        <!--  Liste logiciels  -->
        <ListView
            Grid.Row="2"
            Margin="40,10,40,10"
            Background="Transparent"
            BorderThickness="0"
            ItemsSource="{Binding Logiciels}">

            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="8" ColumnSpacing="20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="120" />
                            <ColumnDefinition Width="120" />
                        </Grid.ColumnDefinitions>

                        <TextBlock
                            Grid.Column="0"
                            FontWeight="SemiBold"
                            Foreground="#1F2933"
                            Text="{Binding Nom}" />

                        <TextBlock
                            Grid.Column="1"
                            Foreground="#374151"
                            Text="{Binding VersionActuelle}" />

                        <TextBlock
                            Grid.Column="2"
                            FontWeight="SemiBold"
                            Foreground="#2563EB"
                            Text="{Binding NouvelleVersion}" />
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>

        </ListView>

        <!--  Bouton Scanner  -->
        <Button
            Grid.Row="3"
            Width="220"
            Height="56"
            Margin="0,20,0,40"
            HorizontalAlignment="Center"
            Background="#384454"
            BorderThickness="0"
            Command="{Binding ScannerCommande}"
            Content="Scanner"
            Foreground="White">

            <Button.Resources>
                <SolidColorBrush x:Key="ButtonBackgroundPointerOver" Color="#4F6D8C" />
                <SolidColorBrush x:Key="ButtonBackgroundPressed" Color="#2F3B4A" />
            </Button.Resources>

        </Button>

    </Grid>
</Page>